# Ralph Progress Log
Started: Sun Mar  1 04:51:08 PST 2026
---

## Codebase Patterns
- Python project uses `pyproject.toml` for all config (build, pytest, coverage, ruff)
- Bot code lives in `bot/`, tests in `tests/` (unit/ and integration/ subdirs)
- Dashboard is React/TypeScript/Vite in `dashboard/`, typechecked with `npm run typecheck`
- `ruff` lint config: `[tool.ruff]` for `line-length`, `[tool.ruff.lint]` for `select` (ruff 0.4+ style)
- `noqa: PLC0415` comments are used throughout to suppress import-not-at-top-of-file lint; these are intentional (lazy imports for optional dependencies)
- `noqa: BLE001` used for broad exception catches that are intentional
- E501 violations fixed by wrapping with parens; conditional expressions split across lines
- pytest is not installed in the devcontainer environment; run tests in CI or install via `pip install -e ".[dev]"`

---

## 2026-03-01 - US-001
- What was implemented: Added ruff linting configuration and fixed all E501 violations
- Files changed:
  - `pyproject.toml`: Added `ruff>=0.4` to dev deps, added `[tool.ruff]` and `[tool.ruff.lint]` sections
  - `bot/api/auth.py`: Wrapped long conditional on line 79
  - `bot/api/player.py`: Wrapped 4 long lines (lines 197, 207, 224, 233, 256)
  - `bot/audio/resolver.py`: Wrapped long conditional (line 59) and warning call (line 188)
  - `bot/cogs/music.py`: Wrapped long assignment (line 33), two decorators (lines 100, 116), and elapsed_offset calculation (line 157)
  - `README.md`: Added "Linting" section with `ruff check bot/` command
  - `prd.json`: Created from PRD markdown (all 6 stories, US-001 now passes=true)
- **Learnings for future iterations:**
  - ruff 0.4+ requires `select` under `[tool.ruff.lint]`, not `[tool.ruff]` directly
  - Line-length violations were the only actual lint errors in the codebase; code style was otherwise clean
  - `awk 'length > 88 ...'` is useful for finding E501 violations when ruff isn't installed
---
